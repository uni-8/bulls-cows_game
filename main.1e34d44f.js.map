{"version":3,"sources":["scripts/main.js"],"names":["secretCode","bgShadow","document","querySelector","gameBox","gameField","button","buttonDescription","innerHTML","attemptCount","gameStarted","checkKey","keyboardEvent","key","addResult","startGame","setTimeout","changeField","getUniqueDigits","set","Set","digits","Math","random","toString","slice","d","add","size","insertAdjacentHTML","classList","remove","focus","removeEventListener","addEventListener","getElementById","play","storage","input","validateInput","value","isNaN","includes","length","pushNotification","result","getHint","secret","guess","chars","Map","bulls","cows","i","get","firstW","lastW","congratulate","scrollTop","scrollHeight","title","description","type","message","createElement","body","append"],"mappings":"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","file":"main.1e34d44f.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst bgShadow = document.querySelector('.bg-shadow');\nconst gameBox = document.querySelector('.container');\nconst gameField = document.querySelector('.main-content');\nconst button = document.querySelector('.footer__start');\nconst buttonDescription = button.innerHTML;\n\nlet secretCode;\nlet attemptCount = 0;\nlet gameStarted = false;\n\ndocument.addEventListener('keydown', checkKey);\nbutton.addEventListener('click', startGame);\n\nfunction checkKey(keyboardEvent) {\n  if (keyboardEvent.key !== 'Enter') {\n    return;\n  }\n\n  if (gameStarted) {\n    addResult();\n\n    return;\n  }\n\n  startGame();\n}\n\nfunction startGame() {\n  setTimeout(changeField, 1000);\n\n  gameBox.classList.add('hidden');\n  bgShadow.classList.add('hidden');\n  document.getElementById('start').play();\n\n  if (document.querySelector('.main-content__notification--success')) {\n    document.querySelector('.main-content__notification--success').remove();\n  }\n\n  function getUniqueDigits() {\n    const set = new Set();\n    let digits = Math.random().toString().slice(2, 6);\n\n    for (const d of digits) {\n      set.add(d);\n    }\n\n    if (set.size < 4) {\n      digits = getUniqueDigits();\n    }\n\n    return digits;\n  }\n\n  function changeField() {\n    secretCode = getUniqueDigits();\n\n    button.innerHTML = buttonDescription;\n    gameField.innerHTML = '';\n\n    gameField.insertAdjacentHTML('afterbegin', `\n    <div class=\"main-content__guess\">\n      <label>\n        Enter your guess here:\n        <input type=\"text\" class=\"main-content__input\">\n      </label>\n      <p>\n        Your previous guesses:\n      </p>\n    </div>\n    <div class=\"main-content__storage\">\n    </div>\n  `);\n\n    gameBox.classList.remove('hidden');\n    gameField.querySelector('.main-content__input').focus();\n\n    gameStarted = true;\n\n    button.removeEventListener('click', startGame);\n    button.addEventListener('click', addResult);\n  }\n}\n\nfunction addResult() {\n  const storage = gameField.querySelector('.main-content__storage');\n  const input = gameField.querySelector('.main-content__input');\n\n  input.focus();\n\n  if (!validateInput(input.value)) {\n    input.value = '';\n\n    return;\n  }\n\n  const result = getHint(secretCode, input.value);\n\n  storage.insertAdjacentHTML('beforeend', `\n      ${result}\n      <br>\n    `);\n\n  storage.scrollTop = storage.scrollHeight;\n  input.value = '';\n\n  function validateInput(value) {\n    switch (true) {\n      case !value:\n      case isNaN(+value):\n      case value.includes('.'):\n      case value.length !== 4:\n        pushNotification(\n          'Wrong input!',\n          'Enter 4 digits',\n          'error'\n        );\n\n        document.getElementById('error').play();\n\n        return false;\n\n      default:\n        return true;\n    }\n  }\n\n  function getHint(secret, guess) {\n    const chars = new Map();\n    let bulls = 0;\n    let cows = 0;\n\n    attemptCount++;\n\n    for (let i = 0; i < guess.length; i++) {\n      if (guess[i] === secret[i]) {\n        bulls++;\n      } else {\n        chars.set(secret[i], chars.get(secret[i]) + 1 || 1);\n      }\n    }\n\n    for (let i = 0; i < guess.length; i++) {\n      if (chars.get(guess[i]) > 0 && secret[i] !== guess[i]) {\n        cows++;\n        chars.set(guess[i], chars.get(guess[i]) - 1);\n      }\n    }\n\n    if (bulls === 4) {\n      congratulate();\n    }\n\n    return `Attempt #<span class=\"main-content__fail\">${attemptCount}</span>:\n      <span class=\"main-content__attempt\">${guess}</span>, you guessed\n      <span class=\"main-content__right\">${bulls} bulls</span>,\n      <span class=\"main-content__almost\">${cows} cows</span>\n    `;\n  }\n\n  function congratulate() {\n    const firstW = (attemptCount === 1) ? 'Amazing' : 'Congrats';\n    const lastW = (attemptCount === 1) ? 'try' : 'tries';\n\n    gameField.innerHTML = '';\n    bgShadow.classList.remove('hidden');\n\n    pushNotification(\n      `You won!`,\n      `${firstW}, you guessed all the bulls in ${attemptCount} ${lastW}!`,\n      `success`\n    );\n\n    document.getElementById('success').play();\n\n    attemptCount = 0;\n    gameStarted = false;\n\n    button.innerHTML = 'Play again';\n    button.removeEventListener('click', addResult);\n    button.addEventListener('click', startGame);\n  }\n}\n\nfunction pushNotification(title, description, type) {\n  const message = document.createElement('div');\n\n  message.classList.add('main-content__notification');\n  message.classList.add(`main-content__notification--${type}`);\n\n  message.insertAdjacentHTML('afterbegin', `\n    <h2>\n      ${title}\n    </h2>\n    <p>\n      ${description}\n    </p>\n  `);\n\n  document.body.append(message);\n\n  if (type === 'error') {\n    setTimeout(() => message.remove(), 3000);\n  }\n}\n"]}